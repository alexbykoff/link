var Watchable=function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="./dist/",t(t.s=2)}([function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var r={};r.dataRepeater=function(e){var t=this;if(e.length&&this._value){if(!Array.isArray(this._value))return Watchable.invokeError("notEnumerable");e.map(function(e){var n=void 0,r=void 0;if(e.children){if(e.children[0].id)return Watchable.invokeError("cantHaveIdRepeat");n=e.children[0].nodeName,r=[].concat(a(e.children[0].classList))}else n="DIV",r="";e.innerHTML="",t._value.forEach(function(t){var a=document.createElement(n);"INPUT"===a.nodeName?a.value=t:a.innerHTML=t,r&&r.forEach(function(e){return a.classList.add(e)}),e.appendChild(a)})})}return this},r.dataLinker=function(e){var t=this;return e.length?(e.map(function(e){return"INPUT"===e.nodeName?e.value=t._value:e.innerHTML=t._value}),this):this},r.dataWatcher=function(e){var t=this;return e.map(function(e){return e.innerHTML=t._value}),Watchable.watchables.set(this.name,this._value),this},t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){var t=void 0;switch(e){case"typeMismatch":t="value of Watchable should match its type.        \nIf you do not want strict typing then omit 'type' argument and it will default to 'any'";break;case"noName":t="watchable's name should be provided as a first argument.        \nWatchable's 'name' argument same as variable's name is a good practice.";break;case"nameMustBeString":t="watchable's name should always be a string.            \nMay be you forgot to add the name argument.";break;case"cantAttach":t="you can not 'attach' a non-detached watchable. 'detach()' first. Watchables are automatically attached upon creation.";break;case"cantBind":t="watchable is already bound.";break;case"noDocument":t="you can run this library from the HTML page only. No 'document' object was found.";break;case"notEnumerable":t="only enumerables can be assigned to 'data-repeat'";break;case"subMustHaveName":t="first parameter of 'subscribe' must be a string. You might have forgotten to add it.";break;case"cantUnsub":t="can not unsubscribe. Make sure you have provided a correct name as an argument.";break;case"cantHaveIdRepeat":t="repeatable template element can not have an 'id'. Use HTML classes instead.";break;default:return}throw console&&console.warn("%c Link error: %c "+t,"color: #eee; background-color: navy",""),new Error("Link syntax error")};t.default=a},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(1),l=a(c),h=n(0),f=a(h),d=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.invokeError("noName"),a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.value,i=void 0===r?null:r,u=a.type,s=void 0===u?"any":u;o(this,e),"string"!=typeof n&&e.invokeError("nameMustBeString"),this.watch=f.default.dataWatcher.bind(this),this.repeat=f.default.dataRepeater.bind(this),this.link=f.default.dataLinker.bind(this),this.name=n,this._type=this.setType(s),this._value=this.setInitialVal(i),this.isDetached=!1,this.tracking=!1,this.trackElement="",this.sub=new Map,this.event=function(e){return t.set(e.target.value)},e.watchables.set(this.name,this._value),this.render()}return s(e,[{key:"set",value:function(t){if(this._value!==t)return"any"!==this._type&&("undefined"==typeof t?"undefined":u(t))!==u(this._type)?e.invokeError("typeMismatch"):(this._value=t,this.sub.entries()&&[].concat(i(this.sub.values())).forEach(function(e){return e()}),this.render())}},{key:"value",value:function(){return this._value}},{key:"type",value:function(){return this._type}},{key:"setInitialVal",value:function(t){return"any"===this._type||u(this._type)===("undefined"==typeof t?"undefined":u(t))?t:e.invokeError("typeMismatch")}},{key:"subscribe",value:function(t,n){return"string"!=typeof t?e.invokeError("subMustHaveName"):this.sub.set(t,n)}},{key:"unsubscribe",value:function(t){return t?this.sub.has(t)?this.sub.delete(t):e.invokeError("cantUnsub"):this.sub.clear()}},{key:"binds",value:function(t){if(!t&&this.tracking)return this.tracking=!1,this.trackElement.removeEventListener("input",this.event);if(t&&this.tracking)return e.invokeError("cantBind");if(t){var n=document.getElementById(t);return n?(this.tracking=!0,this.trackElement=n,n.addEventListener("input",this.event)):void 0}}},{key:"detach",value:function(){return e.watchables.has(this.name)&&e.watchables.delete(this.name),this.isDetached=!0}},{key:"attach",value:function(){return e.watchables.has(this.name)?e.invokeError("cantAttach"):(e.watchables.set(this.name,this._value),this.render())}},{key:"setType",value:function(e){switch(e){case"string":e="string";break;case"number":e=1;break;case"boolean":e=!0}return e}},{key:"render",value:function(){if(!document)return e.invokeError("noDocument");if(e.watchables.has(this.name)){var t=[].concat(i(document.querySelectorAll("[data-watchable="+this.name+"]"))),n=[].concat(i(document.querySelectorAll("[data-link="+this.name+"]"))),a=[].concat(i(document.querySelectorAll("[data-repeat="+this.name+"]")));this.watch(t).repeat(a).link(n)}}}],[{key:"list",value:function(){var t=[];return[].concat(i(e.watchables.keys())).forEach(function(n){return t.push(r({},n,e.watchables.get(n)))}),t}},{key:"invokeError",value:function(t){return e.error(t)}}]),e}();d.watchables=new Map,d.error=l.default,e.exports=d}]);